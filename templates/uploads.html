{%extends "layout.html"%} 

{%block content %}
    <div class="container">
        {% with messages = get_flashed_messages() %}
              {% if messages %}
              <div class='alert alert-success'>
                <ul class='flashes'>
                   {% for message in messages %}
                   <li>{{ message }}</li>
                   {% endfor %}
                </ul>
                </div>
             {% endif %}
          {% endwith %}
    </div>
    
<section>
    <div class="container p-5">
        <div class="row">
            
            <div class="col-lg-8 mx-auto">
                
                <div class="p-5 bg-white shadow rounded-lg">
                    <div class="row mb-5 text-center text-dark">
                        <div class="col-lg-12 mx-auto">
                            <h1 class="display-4" style="font-weight:bolder">Upload Photos</h1>
                        </div>
                    </div>
                    
                    <img src="/static/images/banana.gif" alt="animated bananas" width="300" class="d-block mx-auto mb-4 rounded-pill">
                       
                    <h6 class="text-center mb-4 text-muted">
                        "Browse" to select your file and click to "Upload" to upload!
                    </h6>

                    <form class="form custom-file rounded-pill mb-5" enctype="multipart/form-data" method="POST" action="{{url_for('process_upload_photos')}}">
                        <input id="customFile" type="file" class="custom-file-input rounded-pill" name="image">
                        <label for="customFile" class="custom-file-label rounded-pill">Choose file</label>
                        <hr>
                        <label for="caption">Image Caption: </label>
                        <br>
                        <input id="caption" class="rounded-pill border border-info form-control" type="textarea" name="caption" placeholder="Give your photo a caption.">
                        <br>
                        <label for="tags">Tags: </label>
                        <br>
                        <input id="tags" type="textarea" name="tags" class="rounded-pill border border-info form-control" placeholder="#amazing (Come on, you know you want to hashtag this.)">        
                        <br>
                        <hr>
                        <input class="btn btn-primary" type="submit" value="Upload">
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Add the following code if you want the name of the file appear on select
$(".custom-file-input").on("change", function() {
  var fileName = $(this).val().split("\\").pop();
  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
});
</script>


<table style="width:100%">
    <tr>
        <th>Photo ID</th>
        <th>Photo Name</th>
        <th>Caption</th>
        <th>Tags</th>
        <th>Timestamp</th>
        <th>File Type</th>
        <th>File Size (In Megabytes)</th>
        <th>Photo</th>
        <th>Edit</th>
    </tr>
    {% for d in data %}
    <tr>
        <td>{{ d['_id'] }} </td>
        <td>{{ d['image_name'] }}</td>
        <td>{{ d['image_caption'] }}</td>
        <td>{{ d['image_tags'] }}</td>
        <td>{{ d['uploaded_on'] }}</td>
        <td>{{ d['file_type'] }}</td>
        <td>{{ d['file_size'] }} Mb </td>
        <td><img id="thumbnail" src=" {{ d['image_url'] }} " /></td>
    </tr>
    {% endfor %}
</table>

{%endblock %}
