{"changed":true,"filter":false,"title":"app.py","tooltip":"/app.py","value":"from flask import Flask, render_template, request, redirect, url_for, flash, get_flashed_messages, jsonify\nimport os\nimport pymongo\nfrom bson.objectid import ObjectId\nfrom bson.json_util import dumps\nimport time\n\nfrom flask_uploads import UploadSet, IMAGES, configure_uploads\n# from bson.json_util import dumpsb\n\n\n# Timestamp function\ndef timestamp():\n  now = int(round(time.time()*1000))\n  time_now = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(now/1000))\n  return time_now\n  \napp = Flask(__name__)\n# create app route and test it\nTOP_LEVEL_DIR = os.path.abspath(os.curdir) \nupload_dir = '/static/uploads/images/'\napp.config[\"UPLOADS_DEFAULT_DEST\"] = TOP_LEVEL_DIR + upload_dir\napp.config[\"UPLOADED_IMAGES_DEST\"] = TOP_LEVEL_DIR + upload_dir\napp.config[\"UPLOADED_IMAGES_URL\"] = upload_dir\n\n# create an upload set and name it as images\nimages_upload_set = UploadSet(\"images\", IMAGES) \nconfigure_uploads(app, images_upload_set)\n\n# Retrieve environment environment\nMONGO_URI = os.getenv('MONGO_URI')\n#MONGO_URI = os.environ['MONGOLAB_URI']\nDATABASE_NAME = 'project_photogallery'\nALBUMS = 'albums'\nPHOTOS = 'images'\n# Create connection\nconn = pymongo.MongoClient(MONGO_URI)\ndb = conn[DATABASE_NAME]\n\n# Function to display landing page (Working)\n@app.route('/')\ndef index():\n    messages = get_flashed_messages()\n    print(messages)\n    results = db[ALBUMS].find({})\n    # print(dumps(results))\n    return render_template(\"index.html\", data = results)\n\n# Function to display albums (Working)\n@app.route('/albums')\ndef display_albums():\n    albums = db[ALBUMS].find({})\n    return render_template('layout1.html',data = albums)\n\n# Route to show the page for uploading (Working)\n@app.route('/photos')\ndef photos():\n    results = db[PHOTOS].find({})\n    return render_template(\"photos.html\", data = results)    \n\n# Function to display selected albums (Working)\n@app.route('/albums/<albumid>/edit')\ndef display_selected_album(albumid):\n    selected_album = db[ALBUMS].find_one({\"_id\": ObjectId(albumid)})\n    return render_template(\"layout1edit.html\", data = selected_album)\n    \n\n# Function to show delete confirmation page (Working)\n@app.route('/albums/<albumid>/confirm_delete')\ndef display_delete_confirmation(albumid):\n    selected_album = db[ALBUMS].find_one({\"_id\": ObjectId(albumid)})\n    return render_template(\"layout1delete.html\", data = selected_album)\n    \n    \n# Route to process the soft delete (Currently)\n@app.route('/albums/<albumid>/delete')\ndef process_delete_album(albumid):\n    selected_album = db[ALBUMS].find_one({\"_id\": ObjectId(albumid)})\n    db[ALBUMS].update(\n        {'_id':ObjectId(albumid)},\n        { '$set':\n            {\n                'deleted':'1',\n                'deleted_on': timestamp(),        \n            }\n        })\n    flash(\"Album: {} has been deleted\".format(selected_album['album_name']))\n    return redirect(url_for('display_selected_album'), data = selected_album)\n    \n\n\n# Route to process the upload \n@app.route('/photos/upload', methods=['POST'])\ndef process_upload_photos():\n    # Extract fields from upload form\n    image = request.files.get('image')\n    filename = images_upload_set.save(image)\n    # Get file name and file extension\n    filename_raw, file_extension = os.path.splitext(TOP_LEVEL_DIR + upload_dir + filename)\n    filesize = os.path.getsize(TOP_LEVEL_DIR + upload_dir + filename)\n    caption = request.form.get('caption')\n    tags = request.form.get('tags')\n    # Validation check to see if any file has been uploaded before POSTing to database\n    if filename is not None:\n        db[PHOTOS].insert({\n            'image_url' : images_upload_set.url(filename),\n            'image_name' : filename, \n            'image_caption' : caption,\n            'image_tags' : tags,\n            'uploaded_on' : timestamp(),\n            'deleted': 0,\n            'deleted_on' : \"null\",\n            # Converts filesize to mb 3sf\n            'file_size' : round((filesize/1000000),3),\n            'file_type' : file_extension,\n            })\n        flash(\"Images have been uploaded successfully.\")    \n        return redirect(url_for('photos'))\n    else:\n        flash(\"Please upload a photo before submitting.\")\n        return redirect(url_for('photos'))\n\n    \n# \"magic code\" -- boilerplate\nif __name__ == '__main__':\n    app.secret_key = 'super secret key'\n    app.config['SESSION_TYPE'] = 'filesystem'\n    \n    app.run(host=os.environ.get('IP'),\n            port=int(os.environ.get('PORT')),\n            debug=True)\n\n\n\n","undoManager":{"mark":97,"position":100,"stack":[[{"start":{"row":77,"column":65},"end":{"row":78,"column":0},"action":"insert","lines":["",""],"id":1602},{"start":{"row":78,"column":0},"end":{"row":78,"column":4},"action":"insert","lines":["    "]},{"start":{"row":78,"column":4},"end":{"row":78,"column":5},"action":"insert","lines":["r"]},{"start":{"row":78,"column":5},"end":{"row":78,"column":6},"action":"insert","lines":["e"]},{"start":{"row":78,"column":6},"end":{"row":78,"column":7},"action":"insert","lines":["t"]},{"start":{"row":78,"column":7},"end":{"row":78,"column":8},"action":"insert","lines":["u"]},{"start":{"row":78,"column":8},"end":{"row":78,"column":9},"action":"insert","lines":["r"]},{"start":{"row":78,"column":9},"end":{"row":78,"column":10},"action":"insert","lines":["n"]}],[{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"insert","lines":[" "],"id":1603}],[{"start":{"row":78,"column":11},"end":{"row":78,"column":13},"action":"insert","lines":["\"\""],"id":1604}],[{"start":{"row":78,"column":11},"end":{"row":78,"column":13},"action":"remove","lines":["\"\""],"id":1605},{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"remove","lines":[" "]}],[{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"insert","lines":["\""],"id":1606},{"start":{"row":78,"column":11},"end":{"row":78,"column":12},"action":"insert","lines":["h"]},{"start":{"row":78,"column":12},"end":{"row":78,"column":13},"action":"insert","lines":["i"]}],[{"start":{"row":78,"column":12},"end":{"row":78,"column":13},"action":"remove","lines":["i"],"id":1607},{"start":{"row":78,"column":11},"end":{"row":78,"column":12},"action":"remove","lines":["h"]},{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"remove","lines":["\""]},{"start":{"row":78,"column":9},"end":{"row":78,"column":10},"action":"remove","lines":["n"]},{"start":{"row":78,"column":8},"end":{"row":78,"column":9},"action":"remove","lines":["r"]},{"start":{"row":78,"column":7},"end":{"row":78,"column":8},"action":"remove","lines":["u"]},{"start":{"row":78,"column":6},"end":{"row":78,"column":7},"action":"remove","lines":["t"]},{"start":{"row":78,"column":5},"end":{"row":78,"column":6},"action":"remove","lines":["e"]},{"start":{"row":78,"column":4},"end":{"row":78,"column":5},"action":"remove","lines":["r"]},{"start":{"row":78,"column":0},"end":{"row":78,"column":4},"action":"remove","lines":["    "]},{"start":{"row":77,"column":65},"end":{"row":78,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"insert","lines":["# "],"id":1608},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"insert","lines":["# "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"insert","lines":["# "]}],[{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["# "],"id":1609},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["# "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["# "]},{"start":{"row":78,"column":4},"end":{"row":78,"column":6},"action":"remove","lines":["# "]}],[{"start":{"row":75,"column":4},"end":{"row":75,"column":5},"action":"insert","lines":["p"],"id":1610},{"start":{"row":75,"column":5},"end":{"row":75,"column":6},"action":"insert","lines":["r"]},{"start":{"row":75,"column":6},"end":{"row":75,"column":7},"action":"insert","lines":["o"]},{"start":{"row":75,"column":7},"end":{"row":75,"column":8},"action":"insert","lines":["c"]},{"start":{"row":75,"column":8},"end":{"row":75,"column":9},"action":"insert","lines":["e"]},{"start":{"row":75,"column":9},"end":{"row":75,"column":10},"action":"insert","lines":["s"]},{"start":{"row":75,"column":10},"end":{"row":75,"column":11},"action":"insert","lines":["s"]},{"start":{"row":75,"column":11},"end":{"row":75,"column":12},"action":"insert","lines":["_"]}],[{"start":{"row":75,"column":19},"end":{"row":75,"column":23},"action":"remove","lines":["task"],"id":1611},{"start":{"row":75,"column":19},"end":{"row":75,"column":20},"action":"insert","lines":["a"]},{"start":{"row":75,"column":20},"end":{"row":75,"column":21},"action":"insert","lines":["l"]},{"start":{"row":75,"column":21},"end":{"row":75,"column":22},"action":"insert","lines":["b"]},{"start":{"row":75,"column":22},"end":{"row":75,"column":23},"action":"insert","lines":["u"]},{"start":{"row":75,"column":23},"end":{"row":75,"column":24},"action":"insert","lines":["m"]}],[{"start":{"row":72,"column":0},"end":{"row":73,"column":0},"action":"insert","lines":["",""],"id":1612}],[{"start":{"row":73,"column":0},"end":{"row":77,"column":65},"action":"insert","lines":["def confirm_delete_task(taskid):","    task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    return render_template('confirm_delete_task.html', data=task)"],"id":1613}],[{"start":{"row":77,"column":65},"end":{"row":78,"column":0},"action":"insert","lines":["",""],"id":1614},{"start":{"row":78,"column":0},"end":{"row":78,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":73,"column":0},"end":{"row":77,"column":65},"action":"remove","lines":["def confirm_delete_task(taskid):","    task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    return render_template('confirm_delete_task.html', data=task)"],"id":1615},{"start":{"row":72,"column":0},"end":{"row":73,"column":0},"action":"remove","lines":["",""]},{"start":{"row":71,"column":71},"end":{"row":72,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":68,"column":30},"end":{"row":68,"column":36},"action":"remove","lines":["delete"],"id":1616},{"start":{"row":68,"column":30},"end":{"row":68,"column":44},"action":"insert","lines":["confirm_delete"]}],[{"start":{"row":78,"column":75},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1617},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["    "]},{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["    "]},{"start":{"row":80,"column":4},"end":{"row":81,"column":0},"action":"insert","lines":["",""]},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":81,"column":4},"end":{"row":90,"column":37},"action":"insert","lines":["task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    ","    conn[DATABASE_NAME][TASKS].delete_one({","        '_id':ObjectId(taskid)","    })","    ","    flash(\"Task: {} has been deleted\".format(task['title']))","    return redirect(url_for('index'))"],"id":1618}],[{"start":{"row":77,"column":46},"end":{"row":77,"column":50},"action":"remove","lines":["data"],"id":1619},{"start":{"row":77,"column":46},"end":{"row":77,"column":47},"action":"insert","lines":["s"]},{"start":{"row":77,"column":47},"end":{"row":77,"column":48},"action":"insert","lines":["e"]}],[{"start":{"row":77,"column":46},"end":{"row":77,"column":48},"action":"remove","lines":["se"],"id":1620},{"start":{"row":77,"column":46},"end":{"row":77,"column":60},"action":"insert","lines":["selected_album"]}],[{"start":{"row":78,"column":52},"end":{"row":78,"column":74},"action":"remove","lines":[", data=selected_album)"],"id":1621}],[{"start":{"row":78,"column":53},"end":{"row":78,"column":54},"action":"insert","lines":[")"],"id":1622}],[{"start":{"row":79,"column":0},"end":{"row":90,"column":37},"action":"remove","lines":["    ","    ","    task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    ","    conn[DATABASE_NAME][TASKS].delete_one({","        '_id':ObjectId(taskid)","    })","    ","    flash(\"Task: {} has been deleted\".format(task['title']))","    return redirect(url_for('index'))"],"id":1623},{"start":{"row":78,"column":54},"end":{"row":79,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":78,"column":54},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1624},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["    "]},{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":80,"column":4},"end":{"row":89,"column":37},"action":"insert","lines":["task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    ","    conn[DATABASE_NAME][TASKS].delete_one({","        '_id':ObjectId(taskid)","    })","    ","    flash(\"Task: {} has been deleted\".format(task['title']))","    return redirect(url_for('index'))"],"id":1625}],[{"start":{"row":77,"column":75},"end":{"row":77,"column":76},"action":"insert","lines":[")"],"id":1626}],[{"start":{"row":80,"column":0},"end":{"row":89,"column":37},"action":"remove","lines":["    task = conn[DATABASE_NAME][TASKS].find_one({","        '_id':ObjectId(taskid)","    })","    ","    conn[DATABASE_NAME][TASKS].delete_one({","        '_id':ObjectId(taskid)","    })","    ","    flash(\"Task: {} has been deleted\".format(task['title']))","    return redirect(url_for('index'))"],"id":1627},{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":78,"column":53},"end":{"row":78,"column":54},"action":"insert","lines":[","],"id":1628}],[{"start":{"row":78,"column":54},"end":{"row":78,"column":55},"action":"insert","lines":[" "],"id":1629},{"start":{"row":78,"column":55},"end":{"row":78,"column":56},"action":"insert","lines":["d"]},{"start":{"row":78,"column":56},"end":{"row":78,"column":57},"action":"insert","lines":["a"]},{"start":{"row":78,"column":57},"end":{"row":78,"column":58},"action":"insert","lines":["t"]},{"start":{"row":78,"column":58},"end":{"row":78,"column":59},"action":"insert","lines":["a"]}],[{"start":{"row":78,"column":59},"end":{"row":78,"column":60},"action":"insert","lines":[" "],"id":1630},{"start":{"row":78,"column":60},"end":{"row":78,"column":61},"action":"insert","lines":["="]}],[{"start":{"row":78,"column":61},"end":{"row":78,"column":62},"action":"insert","lines":[" "],"id":1631},{"start":{"row":78,"column":62},"end":{"row":78,"column":63},"action":"insert","lines":["s"]},{"start":{"row":78,"column":63},"end":{"row":78,"column":64},"action":"insert","lines":["e"]},{"start":{"row":78,"column":64},"end":{"row":78,"column":65},"action":"insert","lines":["e"]}],[{"start":{"row":78,"column":64},"end":{"row":78,"column":65},"action":"remove","lines":["e"],"id":1632}],[{"start":{"row":78,"column":64},"end":{"row":78,"column":65},"action":"insert","lines":["l"],"id":1633},{"start":{"row":78,"column":65},"end":{"row":78,"column":66},"action":"insert","lines":["e"]},{"start":{"row":78,"column":66},"end":{"row":78,"column":67},"action":"insert","lines":["c"]}],[{"start":{"row":78,"column":62},"end":{"row":78,"column":67},"action":"remove","lines":["selec"],"id":1634},{"start":{"row":78,"column":62},"end":{"row":78,"column":76},"action":"insert","lines":["selected_album"]}],[{"start":{"row":76,"column":68},"end":{"row":77,"column":0},"action":"insert","lines":["",""],"id":1635},{"start":{"row":77,"column":0},"end":{"row":77,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":77,"column":4},"end":{"row":79,"column":6},"action":"insert","lines":["conn[DATABASE_NAME][TASKS].delete_one({","        '_id':ObjectId(taskid)","    })"],"id":1636}],[{"start":{"row":77,"column":31},"end":{"row":77,"column":37},"action":"remove","lines":["delete"],"id":1637},{"start":{"row":77,"column":31},"end":{"row":77,"column":32},"action":"insert","lines":["u"]},{"start":{"row":77,"column":32},"end":{"row":77,"column":33},"action":"insert","lines":["p"]},{"start":{"row":77,"column":33},"end":{"row":77,"column":34},"action":"insert","lines":["d"]},{"start":{"row":77,"column":34},"end":{"row":77,"column":35},"action":"insert","lines":["a"]},{"start":{"row":77,"column":35},"end":{"row":77,"column":36},"action":"insert","lines":["t"]},{"start":{"row":77,"column":36},"end":{"row":77,"column":37},"action":"insert","lines":["e"]}],[{"start":{"row":77,"column":37},"end":{"row":77,"column":39},"action":"remove","lines":["_o"],"id":1638},{"start":{"row":77,"column":37},"end":{"row":77,"column":38},"action":"insert","lines":["O"]}],[{"start":{"row":77,"column":4},"end":{"row":77,"column":30},"action":"remove","lines":["conn[DATABASE_NAME][TASKS]"],"id":1639},{"start":{"row":77,"column":4},"end":{"row":77,"column":14},"action":"insert","lines":["db[ALBUMS]"]}],[{"start":{"row":78,"column":9},"end":{"row":78,"column":12},"action":"remove","lines":["_id"],"id":1640},{"start":{"row":78,"column":9},"end":{"row":78,"column":10},"action":"insert","lines":["d"]},{"start":{"row":78,"column":10},"end":{"row":78,"column":11},"action":"insert","lines":["e"]},{"start":{"row":78,"column":11},"end":{"row":78,"column":12},"action":"insert","lines":["l"]},{"start":{"row":78,"column":12},"end":{"row":78,"column":13},"action":"insert","lines":["e"]},{"start":{"row":78,"column":13},"end":{"row":78,"column":14},"action":"insert","lines":["t"]},{"start":{"row":78,"column":14},"end":{"row":78,"column":15},"action":"insert","lines":["e"]},{"start":{"row":78,"column":15},"end":{"row":78,"column":16},"action":"insert","lines":["d"]}],[{"start":{"row":78,"column":9},"end":{"row":78,"column":16},"action":"remove","lines":["deleted"],"id":1641},{"start":{"row":78,"column":9},"end":{"row":78,"column":16},"action":"insert","lines":["deleted"]}],[{"start":{"row":78,"column":18},"end":{"row":78,"column":34},"action":"remove","lines":["ObjectId(taskid)"],"id":1642}],[{"start":{"row":78,"column":18},"end":{"row":78,"column":20},"action":"insert","lines":["''"],"id":1643}],[{"start":{"row":78,"column":19},"end":{"row":78,"column":20},"action":"insert","lines":["1"],"id":1644}],[{"start":{"row":78,"column":21},"end":{"row":78,"column":22},"action":"insert","lines":[","],"id":1645}],[{"start":{"row":78,"column":22},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1646},{"start":{"row":79,"column":0},"end":{"row":79,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":79,"column":8},"end":{"row":79,"column":10},"action":"insert","lines":["''"],"id":1647}],[{"start":{"row":79,"column":10},"end":{"row":79,"column":11},"action":"insert","lines":[":"],"id":1648}],[{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["d"],"id":1649},{"start":{"row":79,"column":10},"end":{"row":79,"column":11},"action":"insert","lines":["e"]},{"start":{"row":79,"column":11},"end":{"row":79,"column":12},"action":"insert","lines":["l"]},{"start":{"row":79,"column":12},"end":{"row":79,"column":13},"action":"insert","lines":["e"]},{"start":{"row":79,"column":13},"end":{"row":79,"column":14},"action":"insert","lines":["t"]},{"start":{"row":79,"column":14},"end":{"row":79,"column":15},"action":"insert","lines":["e"]},{"start":{"row":79,"column":15},"end":{"row":79,"column":16},"action":"insert","lines":["d"]}],[{"start":{"row":79,"column":9},"end":{"row":79,"column":16},"action":"remove","lines":["deleted"],"id":1650},{"start":{"row":79,"column":9},"end":{"row":79,"column":19},"action":"insert","lines":["deleted_on"]}],[{"start":{"row":79,"column":21},"end":{"row":79,"column":22},"action":"insert","lines":[" "],"id":1651}],[{"start":{"row":79,"column":22},"end":{"row":79,"column":33},"action":"insert","lines":["timestamp()"],"id":1652}],[{"start":{"row":79,"column":33},"end":{"row":79,"column":34},"action":"insert","lines":[","],"id":1653}],[{"start":{"row":74,"column":34},"end":{"row":75,"column":0},"action":"insert","lines":["",""],"id":1659}],[{"start":{"row":75,"column":0},"end":{"row":75,"column":35},"action":"insert","lines":["@app.route('/task/<taskid>/delete')"],"id":1660}],[{"start":{"row":75,"column":11},"end":{"row":75,"column":34},"action":"remove","lines":["'/task/<taskid>/delete'"],"id":1661},{"start":{"row":75,"column":11},"end":{"row":75,"column":45},"action":"insert","lines":["'/albums/<albumid>/confirm_delete'"]}],[{"start":{"row":75,"column":30},"end":{"row":75,"column":38},"action":"remove","lines":["confirm_"],"id":1662}],[{"start":{"row":85,"column":0},"end":{"row":86,"column":0},"action":"insert","lines":["",""],"id":1663}],[{"start":{"row":86,"column":0},"end":{"row":95,"column":1},"action":"insert","lines":["db.products.update(","   { _id: 100 },","   { $set:","      {","        quantity: 500,","        details: { model: \"14Q3\", make: \"xyz\" },","        tags: [ \"coats\", \"outerwear\", \"clothing\" ]","      }","   }",")"],"id":1664}],[{"start":{"row":95,"column":1},"end":{"row":96,"column":0},"action":"insert","lines":["",""],"id":1665},{"start":{"row":96,"column":0},"end":{"row":97,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":78,"column":21},"end":{"row":78,"column":24},"action":"remove","lines":["One"],"id":1666}],[{"start":{"row":78,"column":23},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1668},{"start":{"row":79,"column":0},"end":{"row":79,"column":8},"action":"insert","lines":["        "]},{"start":{"row":79,"column":8},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":80,"column":4},"end":{"row":80,"column":8},"action":"remove","lines":["    "],"id":1669}],[{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"remove","lines":["    "],"id":1670},{"start":{"row":79,"column":8},"end":{"row":80,"column":0},"action":"remove","lines":["",""]},{"start":{"row":79,"column":4},"end":{"row":79,"column":8},"action":"remove","lines":["    "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"remove","lines":["    "]},{"start":{"row":78,"column":23},"end":{"row":79,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":78,"column":22},"end":{"row":79,"column":0},"action":"insert","lines":["",""],"id":1671},{"start":{"row":79,"column":0},"end":{"row":79,"column":8},"action":"insert","lines":["        "]},{"start":{"row":79,"column":8},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":79,"column":8},"end":{"row":79,"column":9},"action":"insert","lines":["{"],"id":1672},{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["}"]}],[{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["_"],"id":1673},{"start":{"row":79,"column":10},"end":{"row":79,"column":11},"action":"insert","lines":["i"]},{"start":{"row":79,"column":11},"end":{"row":79,"column":12},"action":"insert","lines":["d"]}],[{"start":{"row":79,"column":12},"end":{"row":79,"column":13},"action":"insert","lines":["'"],"id":1674}],[{"start":{"row":79,"column":9},"end":{"row":80,"column":0},"action":"insert","lines":["",""],"id":1675},{"start":{"row":80,"column":0},"end":{"row":80,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":80,"column":8},"end":{"row":80,"column":12},"action":"remove","lines":["    "],"id":1676},{"start":{"row":80,"column":4},"end":{"row":80,"column":8},"action":"remove","lines":["    "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"remove","lines":["    "]},{"start":{"row":79,"column":9},"end":{"row":80,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["'"],"id":1677}],[{"start":{"row":79,"column":14},"end":{"row":79,"column":15},"action":"insert","lines":[":"],"id":1678}],[{"start":{"row":79,"column":15},"end":{"row":79,"column":33},"action":"insert","lines":["ObjectId(albumid)}"],"id":1679}],[{"start":{"row":79,"column":33},"end":{"row":79,"column":34},"action":"insert","lines":[","],"id":1680}],[{"start":{"row":79,"column":34},"end":{"row":80,"column":0},"action":"insert","lines":["",""],"id":1681},{"start":{"row":80,"column":0},"end":{"row":80,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":80,"column":8},"end":{"row":81,"column":0},"action":"insert","lines":["",""],"id":1682},{"start":{"row":81,"column":0},"end":{"row":81,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":80,"column":8},"end":{"row":80,"column":9},"action":"insert","lines":["{"],"id":1683},{"start":{"row":80,"column":9},"end":{"row":80,"column":10},"action":"insert","lines":["$"]}],[{"start":{"row":80,"column":10},"end":{"row":80,"column":11},"action":"insert","lines":["s"],"id":1684},{"start":{"row":80,"column":11},"end":{"row":80,"column":12},"action":"insert","lines":["e"]},{"start":{"row":80,"column":12},"end":{"row":80,"column":13},"action":"insert","lines":["t"]},{"start":{"row":80,"column":13},"end":{"row":80,"column":14},"action":"insert","lines":[":"]}],[{"start":{"row":80,"column":14},"end":{"row":81,"column":0},"action":"insert","lines":["",""],"id":1685},{"start":{"row":81,"column":0},"end":{"row":81,"column":12},"action":"insert","lines":["            "]},{"start":{"row":81,"column":12},"end":{"row":81,"column":13},"action":"insert","lines":["{"]},{"start":{"row":81,"column":13},"end":{"row":81,"column":14},"action":"insert","lines":["}"]}],[{"start":{"row":81,"column":13},"end":{"row":83,"column":12},"action":"insert","lines":["","                ","            "],"id":1686}],[{"start":{"row":84,"column":9},"end":{"row":85,"column":0},"action":"insert","lines":["",""],"id":1687},{"start":{"row":85,"column":0},"end":{"row":85,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":82,"column":8},"end":{"row":83,"column":34},"action":"insert","lines":["'deleted':'1',","        'deleted_on': timestamp(),"],"id":1688}],[{"start":{"row":82,"column":8},"end":{"row":82,"column":12},"action":"insert","lines":["    "],"id":1689}],[{"start":{"row":82,"column":12},"end":{"row":82,"column":16},"action":"insert","lines":["    "],"id":1690}],[{"start":{"row":83,"column":8},"end":{"row":83,"column":12},"action":"insert","lines":["    "],"id":1691}],[{"start":{"row":83,"column":12},"end":{"row":83,"column":16},"action":"insert","lines":["    "],"id":1692}],[{"start":{"row":87,"column":8},"end":{"row":90,"column":0},"action":"remove","lines":["{","        'deleted':'1',","        'deleted_on': timestamp(),",""],"id":1693}],[{"start":{"row":87,"column":0},"end":{"row":87,"column":13},"action":"remove","lines":["            }"],"id":1694},{"start":{"row":86,"column":8},"end":{"row":87,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":86,"column":4},"end":{"row":86,"column":8},"action":"remove","lines":["    "],"id":1695},{"start":{"row":86,"column":0},"end":{"row":86,"column":4},"action":"remove","lines":["    "]},{"start":{"row":85,"column":9},"end":{"row":86,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":80,"column":9},"end":{"row":80,"column":10},"action":"insert","lines":[" "],"id":1696}],[{"start":{"row":80,"column":10},"end":{"row":80,"column":11},"action":"insert","lines":["'"],"id":1697}],[{"start":{"row":80,"column":15},"end":{"row":80,"column":16},"action":"insert","lines":["'"],"id":1698}],[{"start":{"row":89,"column":0},"end":{"row":99,"column":1},"action":"remove","lines":["","db.products.update(","   { _id: 100 },","   { $set:","      {","        quantity: 500,","        details: { model: \"14Q3\", make: \"xyz\" },","        tags: [ \"coats\", \"outerwear\", \"clothing\" ]","      }","   }",")"],"id":1699},{"start":{"row":88,"column":4},"end":{"row":89,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":122,"column":0},"end":{"row":136,"column":18},"action":"remove","lines":["","# Soft Delete (0 = not deleted, 1 = deleted)","# @app.route('/photos/delete')","# def delete():","#     results = db[PHOTOS].find({})","#     return render_template(\"delete.html\", data = results) ","#     # if request.method == 'POST':","#     #     user_selected_file = request.form.getlist('selection')","#     #     print(user_selected_file)","","#         # db[PHOTOS].update(","#         #     {","#         #         'deleted': 1,","#         #         'deleted_on' : timestamp(),","#         #     })"],"id":1700},{"start":{"row":121,"column":0},"end":{"row":122,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":60,"column":39},"end":{"row":60,"column":48},"action":"remove","lines":["Currently"],"id":1701},{"start":{"row":60,"column":39},"end":{"row":60,"column":40},"action":"insert","lines":["W"]},{"start":{"row":60,"column":40},"end":{"row":60,"column":41},"action":"insert","lines":["o"]},{"start":{"row":60,"column":41},"end":{"row":60,"column":42},"action":"insert","lines":["r"]},{"start":{"row":60,"column":42},"end":{"row":60,"column":43},"action":"insert","lines":["k"]},{"start":{"row":60,"column":43},"end":{"row":60,"column":44},"action":"insert","lines":["i"]},{"start":{"row":60,"column":44},"end":{"row":60,"column":45},"action":"insert","lines":["n"]},{"start":{"row":60,"column":45},"end":{"row":60,"column":46},"action":"insert","lines":["g"]}],[{"start":{"row":67,"column":42},"end":{"row":67,"column":43},"action":"insert","lines":[" "],"id":1702}],[{"start":{"row":67,"column":42},"end":{"row":67,"column":43},"action":"remove","lines":[" "],"id":1703}],[{"start":{"row":67,"column":43},"end":{"row":67,"column":44},"action":"insert","lines":[" "],"id":1704}],[{"start":{"row":67,"column":44},"end":{"row":67,"column":53},"action":"insert","lines":["(Working)"],"id":1705}],[{"start":{"row":74,"column":34},"end":{"row":74,"column":35},"action":"insert","lines":[" "],"id":1706}],[{"start":{"row":74,"column":35},"end":{"row":74,"column":37},"action":"insert","lines":["()"],"id":1707}],[{"start":{"row":74,"column":36},"end":{"row":74,"column":37},"action":"insert","lines":["C"],"id":1708},{"start":{"row":74,"column":37},"end":{"row":74,"column":38},"action":"insert","lines":["u"]},{"start":{"row":74,"column":38},"end":{"row":74,"column":39},"action":"insert","lines":["r"]},{"start":{"row":74,"column":39},"end":{"row":74,"column":40},"action":"insert","lines":["r"]},{"start":{"row":74,"column":40},"end":{"row":74,"column":41},"action":"insert","lines":["e"]},{"start":{"row":74,"column":41},"end":{"row":74,"column":42},"action":"insert","lines":["n"]},{"start":{"row":74,"column":42},"end":{"row":74,"column":43},"action":"insert","lines":["t"]},{"start":{"row":74,"column":43},"end":{"row":74,"column":44},"action":"insert","lines":["l"]},{"start":{"row":74,"column":44},"end":{"row":74,"column":45},"action":"insert","lines":["y"]}]]},"ace":{"folds":[],"scrolltop":549,"scrollleft":0,"selection":{"start":{"row":74,"column":46},"end":{"row":74,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":44,"state":"start","mode":"ace/mode/python"}},"timestamp":1566892663794}